{% extends 'template.html' %}

{%block title%}{{ title }}{% endblock %}

{% block content %}
{% load static %}
{% load tags_extras %}
<link rel="stylesheet" href="{% static 'mfc/css/scss/pages-styles/home/home.css' %}" />


<section class="main-article">
    <div class="main-article-wrapper">
        {% if editor %}
        <a href="{% url 'edit-article' %}" class="main-article-edit">Добавить статью</a>
        {% endif %}
        {% for article in articles %}
        <div class="article">
            <img class="article__image" src="{{ article.image_url }}" alt="article">
            <div class="article-text-wrapper">
                <p class="article__title">{{ article.title }}</p>
                <p class="article__article-text">
                    {{ article.body|slice:":350"|add:"..."}}
                </p>
                <a href="{% url 'article' article.article_id %}" class="article__link">Подробнее</a>
            </div>
        </div>
        {%endfor%}
        <div class="main-article__buttons-wrapper">
            <input type="radio" value="1" class="article__number-button" name="article_number" checked>
            <input type="radio" value="2" class="article__number-button" name="article_number">
            <input type="radio" value="3" class="article__number-button" name="article_number">
            <input type="radio" value="4" class="article__number-button" name="article_number">
        </div>
    </div>
</section>


<section class="links">
    <div class="links-wrapper">
        <ul class="links__links">
            <li class="links__link-item">
                <a href="" class="links__link">
                    <svg class="links__svg" width="70" height="70" viewBox="0 0 256 256" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M212.2 67.8L172.2 27.8C171.666 27.2216 171.016 26.7623 170.292 26.4521C169.568 26.142 168.787 25.9879 168 26H88C84.287 26 80.726 27.475 78.1005 30.1005C75.475 32.726 74 36.287 74 40V58H56C52.287 58 48.726 59.475 46.1005 62.1005C43.475 64.726 42 68.287 42 72V216C42 219.713 43.475 223.274 46.1005 225.899C48.726 228.525 52.287 230 56 230H168C171.713 230 175.274 228.525 177.899 225.899C180.525 223.274 182 219.713 182 216V198H200C203.713 198 207.274 196.525 209.899 193.899C212.525 191.274 214 187.713 214 184V72C214.012 71.2127 213.858 70.4317 213.548 69.708C213.238 68.9843 212.778 68.3342 212.2 67.8V67.8ZM170 216C170 216.53 169.789 217.039 169.414 217.414C169.039 217.789 168.53 218 168 218H56C55.4696 218 54.9609 217.789 54.5858 217.414C54.2107 217.039 54 216.53 54 216V72C54 71.4696 54.2107 70.9608 54.5858 70.5858C54.9609 70.2107 55.4696 70 56 70H133.5L170 106.5V216ZM202 184C202 184.53 201.789 185.039 201.414 185.414C201.039 185.789 200.53 186 200 186H182V104C182.012 103.213 181.858 102.432 181.548 101.708C181.238 100.984 180.778 100.334 180.2 99.8L140.2 59.8C139.666 59.2216 139.016 58.7623 138.292 58.4521C137.568 58.142 136.787 57.9879 136 58H86V40C86 39.4696 86.2107 38.9608 86.5858 38.5858C86.9609 38.2107 87.4696 38 88 38H165.5L202 74.5V184ZM142 152C142 153.591 141.368 155.117 140.243 156.243C139.117 157.368 137.591 158 136 158H88C86.4087 158 84.8826 157.368 83.7574 156.243C82.6321 155.117 82 153.591 82 152C82 150.409 82.6321 148.883 83.7574 147.757C84.8826 146.632 86.4087 146 88 146H136C137.591 146 139.117 146.632 140.243 147.757C141.368 148.883 142 150.409 142 152ZM142 184C142 185.591 141.368 187.117 140.243 188.243C139.117 189.368 137.591 190 136 190H88C86.4087 190 84.8826 189.368 83.7574 188.243C82.6321 187.117 82 185.591 82 184C82 182.409 82.6321 180.883 83.7574 179.757C84.8826 178.632 86.4087 178 88 178H136C137.591 178 139.117 178.632 140.243 179.757C141.368 180.883 142 182.409 142 184Z"
                            fill="#00B2B2" />
                    </svg>
                    <p class="links__text">Все услуги</p>

                </a>
            </li>
            <li class="links__link-item">
                <a href="" class="links__link">
                    <svg class="links__svg" width="70" height="70" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M20 2C20.2652 2 20.5196 2.10536 20.7071 2.29289C20.8946 2.48043 21 2.73478 21 3V21C21 21.2652 20.8946 21.5196 20.7071 21.7071C20.5196 21.8946 20.2652 22 20 22H4C3.73478 22 3.48043 21.8946 3.29289 21.7071C3.10536 21.5196 3 21.2652 3 21V3C3 2.73478 3.10536 2.48043 3.29289 2.29289C3.48043 2.10536 3.73478 2 4 2H20ZM16 16H8V18H16V16ZM12 6C10.9391 6 9.92172 6.42143 9.17157 7.17157C8.42143 7.92172 8 8.93913 8 10C8 11.0609 8.42143 12.0783 9.17157 12.8284C9.92172 13.5786 10.9391 14 12 14C13.0609 14 14.0783 13.5786 14.8284 12.8284C15.5786 12.0783 16 11.0609 16 10C16 8.93913 15.5786 7.92172 14.8284 7.17157C14.0783 6.42143 13.0609 6 12 6ZM12 8C12.5304 8 13.0391 8.21071 13.4142 8.58579C13.7893 8.96086 14 9.46957 14 10C14 10.5304 13.7893 11.0391 13.4142 11.4142C13.0391 11.7893 12.5304 12 12 12C11.4696 12 10.9609 11.7893 10.5858 11.4142C10.2107 11.0391 10 10.5304 10 10C10 9.46957 10.2107 8.96086 10.5858 8.58579C10.9609 8.21071 11.4696 8 12 8Z"
                            fill="#00B2B2" />
                    </svg>
                    <p class="links__text">Паспорта и регистрация</p>
                </a>
            </li>
            <li class="links__link-item">
                <a href="" class="links__link">
                    <svg class="links__svg" width="70" height="52" viewBox="0 0 70 52" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M67.5 20.6875H59.0625V11.8125C59.0625 10.4297 57.9453 9.3125 56.5625 9.3125H31.9531L22.7891 0.546875C22.6725 0.437717 22.5191 0.37637 22.3594 0.375H2.5C1.11719 0.375 0 1.49219 0 2.875V49.125C0 50.5078 1.11719 51.625 2.5 51.625H57.0312C58.0469 51.625 58.9688 51.0078 59.3516 50.0625L69.8203 24.125C69.9375 23.8281 70 23.5078 70 23.1875C70 21.8047 68.8828 20.6875 67.5 20.6875ZM5.625 6H20.3516L29.6953 14.9375H53.4375V20.6875H13.5938C12.5781 20.6875 11.6562 21.3047 11.2734 22.25L5.625 36.25V6ZM55.2578 46H7.42188L15.4922 26H63.3359L55.2578 46Z"
                            fill="#00B2B2" />
                    </svg>
                    <p class="links__text">Справки и выписки</p>
                </a>
            </li>
            <li class="links__link-item">
                <a href="" class="links__link">
                    <svg class="links__svg" width="70" height="70" viewBox="0 0 1024 1024" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M945 412H689C684.6 412 681 415.6 681 420V468C681 472.4 684.6 476 689 476H945C949.4 476 953 472.4 953 468V420C953 415.6 949.4 412 945 412ZM811 548H689C684.6 548 681 551.6 681 556V604C681 608.4 684.6 612 689 612H811C815.4 612 819 608.4 819 604V556C819 551.6 815.4 548 811 548ZM477.3 322.5H434C427.8 322.5 422.8 327.5 422.8 333.7V581.7C422.8 585.3 424.5 588.6 427.4 590.7L576.3 699.3C581.3 702.9 588.3 701.9 591.9 696.9L617.6 661.8V661.7C621.2 656.7 620.1 649.7 615.1 646.1L488.4 554.5V333.7C488.5 327.5 483.4 322.5 477.3 322.5V322.5Z"
                            fill="#00B2B2" />
                        <path
                            d="M804.8 673.9H747C741.4 673.9 736.1 676.8 733.1 681.6C720.4 701.7 705.6 720.3 688.6 737.3C659.3 766.6 625.2 789.6 587.3 805.6C548 822.2 506.3 830.6 463.3 830.6C420.2 830.6 378.5 822.2 339.3 805.6C301.4 789.6 267.3 766.6 238 737.3C208.7 708 185.7 673.9 169.7 636C153.1 596.8 144.7 555.1 144.7 512C144.7 468.9 153.1 427.3 169.7 388C185.7 350.1 208.7 316 238 286.7C267.3 257.4 301.4 234.4 339.3 218.4C378.5 201.8 420.3 193.4 463.3 193.4C506.4 193.4 548.1 201.8 587.3 218.4C625.2 234.4 659.3 257.4 688.6 286.7C705.6 303.7 720.4 322.3 733.1 342.4C736.1 347.2 741.4 350.1 747 350.1H804.8C811.7 350.1 816.1 342.9 813 336.8C747.8 207.1 615.6 122.8 468 121.1C251.9 118.4 72.4 295.3 72 511.2C71.6 727.5 246.9 903 463.2 903C612.7 903 747.1 818.4 813 687.2C816.1 681.1 811.6 673.9 804.8 673.9V673.9Z"
                            fill="#00B2B2" />
                    </svg>
                    <p class="links__text">Заявления</p>
                </a>
            </li>
            <!--             
            <li class="links__link-item">
                <a href="" class="links__link">not done yet</a>
            </li>
            <li class="links__link-item">
                <a href="" class="links__link">not done yet</a>
            </li> -->
        </ul>
    </div>
</section>

<script>
    let currentArticle = 1;

    let slideButtons = document.querySelectorAll('.article__number-button')
    let slides = document.querySelectorAll('.article');
    for (let slide of slides) {
        slide.style.display = "none";
        slide.style.opacity = "0";
    }
    slides[currentArticle - 1].style.opacity = "1";
    slides[currentArticle - 1].style.display = "flex";


    function changeSlide(el) {
        let slChange = new Promise((resolve, reject) => {
            slides[currentArticle - 1].style.opacity = "0.2";
            setTimeout(() => {
                resolve()
            }, 400);
        })
            .then(res => {
                slides[currentArticle - 1].style.display = "none";
                currentArticle = el.value;
                slides[currentArticle - 1].style.display = "flex";
                slides[currentArticle - 1].style.opacity = "1";
            })
    }

    slideButtons.forEach((el) => {
        el.addEventListener('click', () => {
            changeSlide(el)
        })
    })

    setInterval(() => {
        i = currentArticle;
        slideButtons[i - 1].checked = false;
        if (currentArticle == 4) {
            i = 0;
        }
        slideButtons[i].checked = true;
        changeSlide(slideButtons[i]);
    }, 15000);






</script>



{% endblock %}